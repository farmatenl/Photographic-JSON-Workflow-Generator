<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photographic JSON Workflow Generator</title>
    <style>
        :root {
            --color-background: #fcfcf9;
            --color-surface: #fffffe;
            --color-text: #13343b;
            --color-text-secondary: #626c71;
            --color-primary: #21808d;
            --color-primary-hover: #1d7480;
            --color-border: rgba(94, 82, 64, 0.2);
            --color-secondary: rgba(94, 82, 64, 0.12);
            --font-family-base: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            --font-family-mono: "Monaco", "Courier New", monospace;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --color-background: #1f2121;
                --color-surface: #262828;
                --color-text: #f5f5f5;
                --color-text-secondary: rgba(167, 169, 169, 0.7);
                --color-primary: #32b8c6;
                --color-primary-hover: #2da6b2;
                --color-border: rgba(119, 124, 124, 0.3);
                --color-secondary: rgba(119, 124, 124, 0.15);
            }
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-family-base);
            background: var(--color-background);
            color: var(--color-text);
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            font-size: 28px;
            margin-bottom: 10px;
            color: var(--color-text);
        }

        .subtitle {
            color: var(--color-text-secondary);
            margin-bottom: 30px;
            font-size: 14px;
        }

        .layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 20px;
        }

        @media (max-width: 1024px) {
            .layout {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
        }

        .card h2 {
            font-size: 18px;
            margin-bottom: 20px;
            color: var(--color-text);
            font-weight: 600;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 13px;
            color: var(--color-text);
        }

        input, select, textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--color-border);
            border-radius: 8px;
            background: var(--color-surface);
            color: var(--color-text);
            font-family: var(--font-family-base);
            font-size: 14px;
            transition: border-color 0.2s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--color-primary);
        }

        textarea {
            resize: vertical;
            min-height: 80px;
            font-family: var(--font-family-mono);
            font-size: 12px;
        }

        .btn {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 500;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.2s;
            width: 100%;
        }

        .btn:hover {
            background: var(--color-primary-hover);
        }

        .btn:active {
            transform: translateY(1px);
        }

        .btn-secondary {
            background: var(--color-secondary);
            color: var(--color-text);
            margin-top: 12px;
        }

        .btn-secondary:hover {
            background: rgba(94, 82, 64, 0.2);
        }

        @media (prefers-color-scheme: dark) {
            .btn-secondary {
                background: rgba(119, 124, 124, 0.15);
            }
            .btn-secondary:hover {
                background: rgba(119, 124, 124, 0.25);
            }
        }

        .output-area {
            background: var(--color-background);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            padding: 16px;
            font-family: var(--font-family-mono);
            font-size: 12px;
            max-height: 600px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .presets {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        .preset-btn {
            padding: 10px;
            background: var(--color-secondary);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            color: var(--color-text);
            transition: all 0.2s;
            text-align: center;
        }

        .preset-btn:hover {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }

        .section-group {
            background: var(--color-background);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 16px;
        }

        .section-group h3 {
            font-size: 14px;
            margin-bottom: 12px;
            color: var(--color-primary);
            font-weight: 600;
        }

        .inline-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .success-banner {
            background: rgba(33, 128, 141, 0.15);
            border: 1px solid rgba(33, 128, 141, 0.25);
            color: var(--color-primary);
            padding: 12px;
            border-radius: 8px;
            margin-top: 16px;
            text-align: center;
            font-weight: 500;
            font-size: 13px;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }

        .success-banner.show {
            opacity: 1;
            transform: translateY(0);
        }

        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            border-bottom: 1px solid var(--color-border);
            padding-bottom: 8px;
        }

        .tab {
            padding: 8px 16px;
            background: transparent;
            border: none;
            color: var(--color-text-secondary);
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            border-radius: 6px 6px 0 0;
            transition: all 0.2s;
        }

        .tab.active {
            color: var(--color-primary);
            background: var(--color-secondary);
        }

        .tab:hover {
            color: var(--color-text);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Photographic JSON Workflow Generator</h1>
        <p class="subtitle">Generate hyper-realistic photographic reconstruction JSON templates for different scenes, scenarios, and seasons</p>

        <div class="layout">
            <!-- Input Panel -->
            <div class="card">
                <h2>Scene Configuration</h2>

                <div class="presets">
                    <button class="preset-btn" onclick="loadPreset('winter_ski')">‚ùÑÔ∏è Winter Ski</button>
                    <button class="preset-btn" onclick="loadPreset('summer_beach')">üèñÔ∏è Summer Beach</button>
                    <button class="preset-btn" onclick="loadPreset('autumn_forest')">üçÇ Autumn Forest</button>
                    <button class="preset-btn" onclick="loadPreset('spring_garden')">üå∏ Spring Garden</button>
                    <button class="preset-btn" onclick="loadPreset('urban_night')">üåÉ Urban Night</button>
                    <button class="preset-btn" onclick="loadPreset('desert_sunset')">üèúÔ∏è Desert Sunset</button>
                </div>

                <div class="section-group">
                    <h3>üì∏ Technical Settings</h3>
                    <div class="form-group">
                        <label>Aspect Ratio</label>
                        <select id="aspectRatio">
                            <option value="3:4">3:4 (Portrait)</option>
                            <option value="16:9">16:9 (Landscape)</option>
                            <option value="1:1">1:1 (Square)</option>
                            <option value="4:5">4:5 (Instagram Portrait)</option>
                            <option value="9:16">9:16 (Vertical Stories)</option>
                        </select>
                    </div>
                    <div class="inline-group">
                        <div class="form-group">
                            <label>Resolution</label>
                            <select id="resolution">
                                <option value="8K RAW / Master Quality">8K RAW / Master Quality</option>
                                <option value="4K UHD / High Quality">4K UHD / High Quality</option>
                                <option value="HD / Standard Quality">HD / Standard Quality</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Engine Mode</label>
                            <select id="engineMode">
                                <option value="Physical Rendering (PBR)">Physical Rendering (PBR)</option>
                                <option value="Cinematic Ray Tracing">Cinematic Ray Tracing</option>
                                <option value="Stylized Rendering">Stylized Rendering</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="section-group">
                    <h3>üë§ Subject Details</h3>
                    <div class="form-group">
                        <label>Identity/Reference</label>
                        <input type="text" id="identity" placeholder="e.g., Reference image, Person A">
                    </div>
                    <div class="form-group">
                        <label>Gaze Direction</label>
                        <input type="text" id="gaze" placeholder="e.g., Direct-to-lens, Looking away">
                    </div>
                    <div class="form-group">
                        <label>Expression</label>
                        <input type="text" id="expression" placeholder="e.g., Slight natural smile, Focused concentration">
                    </div>
                    <div class="form-group">
                        <label>Hair Color & Style</label>
                        <input type="text" id="hair" placeholder="e.g., Deep red / Long / Straight">
                    </div>
                    <div class="form-group">
                        <label>Eye Color</label>
                        <input type="text" id="eyeColor" placeholder="e.g., Light grey-blue, Hazel brown">
                    </div>
                </div>

                <div class="section-group">
                    <h3>üëï Wardrobe & Styling</h3>
                    <div class="form-group">
                        <label>Main Outfit</label>
                        <textarea id="outfit" placeholder="Describe the main clothing items (e.g., White quilted winter jacket, Black contrast collar)"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Accessories</label>
                        <input type="text" id="accessories" placeholder="e.g., Beanie, sunglasses, jewelry">
                    </div>
                </div>

                <div class="section-group">
                    <h3>üåç Environment Settings</h3>
                    <div class="form-group">
                        <label>Location/Setting</label>
                        <input type="text" id="location" placeholder="e.g., Alpine Ski Resort, Tropical Beach">
                    </div>
                    <div class="form-group">
                        <label>Season</label>
                        <select id="season">
                            <option value="Winter">Winter</option>
                            <option value="Spring">Spring</option>
                            <option value="Summer">Summer</option>
                            <option value="Autumn">Autumn</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Time of Day</label>
                        <select id="timeOfDay">
                            <option value="Crisp natural daylight">Crisp natural daylight</option>
                            <option value="Golden hour / Warm sunset">Golden hour / Warm sunset</option>
                            <option value="Blue hour / Evening twilight">Blue hour / Evening twilight</option>
                            <option value="Midday harsh sunlight">Midday harsh sunlight</option>
                            <option value="Overcast soft lighting">Overcast soft lighting</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Background Elements</label>
                        <textarea id="background" placeholder="List background elements (e.g., Snow-capped mountains, Active ski lift)"></textarea>
                    </div>
                </div>

                <button class="btn" onclick="generateJSON()">üöÄ Generate JSON</button>
                <button class="btn btn-secondary" onclick="resetForm()">üîÑ Reset Form</button>
            </div>

            <!-- Output Panel -->
            <div class="card">
                <div class="tabs">
                    <button class="tab active" onclick="switchTab('formatted')">Formatted JSON</button>
                    <button class="tab" onclick="switchTab('raw')">Raw JSON</button>
                    <button class="tab" onclick="switchTab('workflow')">Antigravity Workflow</button>
                </div>
                
                <div id="formatted-tab">
                    <h2>Generated JSON Template</h2>
                    <div class="output-area" id="jsonOutput">
                        Click "Generate JSON" to create your template...
                    </div>
                    <button class="btn" onclick="copyToClipboard()" style="margin-top: 16px;">üìã Copy to Clipboard</button>
                    <button class="btn btn-secondary" onclick="downloadJSON()">üíæ Download JSON</button>
                    <div id="successBanner" class="success-banner">
                        ‚úì Copied to clipboard!
                    </div>
                </div>

                <div id="raw-tab" style="display: none;">
                    <h2>Raw JSON (Minified)</h2>
                    <div class="output-area" id="rawOutput">
                        Click "Generate JSON" to create your template...
                    </div>
                    <button class="btn" onclick="copyRaw()" style="margin-top: 16px;">üìã Copy Raw JSON</button>
                    <div id="rawSuccessBanner" class="success-banner">
                        ‚úì Raw JSON copied to clipboard!
                    </div>
                </div>

                <div id="workflow-tab" style="display: none;">
                    <h2>Antigravity Workflow File</h2>
                    <p style="color: var(--color-text-secondary); font-size: 13px; margin-bottom: 16px;">
                        Save this as <code style="background: var(--color-secondary); padding: 2px 6px; border-radius: 4px;">.agent/workflows/generate-photo-json.md</code> in your Antigravity workspace
                    </p>
                    <div class="output-area" id="workflowOutput">
                        Click "Generate JSON" to create workflow file...
                    </div>
                    <button class="btn" onclick="downloadWorkflow()" style="margin-top: 16px;">üíæ Download Workflow File</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentJSON = null;

        const presetConfigs = {
            winter_ski: {
                aspectRatio: '3:4',
                resolution: '8K RAW / Master Quality',
                engineMode: 'Physical Rendering (PBR)',
                identity: 'Reference image',
                gaze: 'Direct-to-lens / High-intimacy proximity',
                expression: 'Slight natural smile / Genuine winter joy',
                hair: 'Deep red / Long / Straight / High-luster strands',
                eyeColor: 'Light grey-blue',
                outfit: 'White quilted winter jacket with black contrast collar and snap-button hardware',
                accessories: 'Beige knitted wool beanie, Black ski goggles resting on forehead',
                location: 'Alpine Ski Resort / High-Altitude Summit',
                season: 'Winter',
                timeOfDay: 'Crisp natural daylight',
                background: 'Snow-capped mountain ranges, Active ski lift / Gondola system, Groomed powder-snow slope, Clear sky with scattered cirrus clouds'
            },
            summer_beach: {
                aspectRatio: '16:9',
                resolution: '8K RAW / Master Quality',
                engineMode: 'Physical Rendering (PBR)',
                identity: 'Reference image',
                gaze: 'Relaxed gaze toward horizon',
                expression: 'Bright genuine smile / Summer happiness',
                hair: 'Sun-bleached blonde / Wavy / Beach-textured',
                eyeColor: 'Ocean blue',
                outfit: 'White linen sundress with floral embroidery, Lightweight fabric with natural drape',
                accessories: 'Wide-brim straw hat, Polarized sunglasses, Delicate gold jewelry',
                location: 'Tropical Beach / Coastal Paradise',
                season: 'Summer',
                timeOfDay: 'Golden hour / Warm sunset',
                background: 'Turquoise ocean waves, Palm trees swaying, Sandy beach with footprints, Sailboats on horizon'
            },
            autumn_forest: {
                aspectRatio: '4:5',
                resolution: '8K RAW / Master Quality',
                engineMode: 'Physical Rendering (PBR)',
                identity: 'Reference image',
                gaze: 'Contemplative look into distance',
                expression: 'Peaceful contentment / Autumn serenity',
                hair: 'Auburn brown / Shoulder-length / Natural waves',
                eyeColor: 'Warm hazel',
                outfit: 'Rust-colored oversized knit sweater, Dark denim jeans, Brown leather boots',
                accessories: 'Wool scarf with plaid pattern, Small leather crossbody bag',
                location: 'Deciduous Forest Trail / Woodland Path',
                season: 'Autumn',
                timeOfDay: 'Golden hour / Warm sunset',
                background: 'Golden and crimson fall foliage, Fallen leaves carpet, Dappled sunlight through trees, Misty atmosphere'
            },
            spring_garden: {
                aspectRatio: '1:1',
                resolution: '8K RAW / Master Quality',
                engineMode: 'Physical Rendering (PBR)',
                identity: 'Reference image',
                gaze: 'Admiring flowers / Downward gaze',
                expression: 'Soft smile / Spring renewal joy',
                hair: 'Honey blonde / Medium length / Soft curls',
                eyeColor: 'Green with golden flecks',
                outfit: 'Pastel pink cotton blouse, White flowing midi skirt, Tan woven sandals',
                accessories: 'Delicate floral crown, Small woven basket',
                location: 'Botanical Garden / Spring Flower Field',
                season: 'Spring',
                timeOfDay: 'Crisp natural daylight',
                background: 'Cherry blossom trees in full bloom, Tulip beds in vibrant colors, Stone garden pathways, Butterflies and bees'
            },
            urban_night: {
                aspectRatio: '9:16',
                resolution: '8K RAW / Master Quality',
                engineMode: 'Cinematic Ray Tracing',
                identity: 'Reference image',
                gaze: 'Confident direct camera contact',
                expression: 'Subtle smirk / Urban confidence',
                hair: 'Jet black / Sleek straight / High shine',
                eyeColor: 'Dark brown',
                outfit: 'Black leather jacket with metal hardware, Dark fitted jeans, White minimalist sneakers',
                accessories: 'Silver chain necklace, Smart watch, Wireless earbuds',
                location: 'Downtown Urban District / Night Street Scene',
                season: 'Autumn',
                timeOfDay: 'Blue hour / Evening twilight',
                background: 'Neon storefront signs, Blurred car light trails, Reflective wet pavement, Modern skyscrapers'
            },
            desert_sunset: {
                aspectRatio: '16:9',
                resolution: '8K RAW / Master Quality',
                engineMode: 'Physical Rendering (PBR)',
                identity: 'Reference image',
                gaze: 'Gazing at sunset / Profile angle',
                expression: 'Peaceful wonder / Desert tranquility',
                hair: 'Dark brown / Long / Wind-swept',
                eyeColor: 'Deep brown',
                outfit: 'Earth-tone linen shirt, Khaki cargo pants, Desert hiking boots',
                accessories: 'Wide-brim adventure hat, Bandana around neck, Camera strap',
                location: 'Desert Canyon / Sandstone Formation',
                season: 'Summer',
                timeOfDay: 'Golden hour / Warm sunset',
                background: 'Red rock formations, Sand dunes with ripple patterns, Dramatic cloud formations, Distant mesa silhouettes'
            }
        };

        function loadPreset(preset) {
            const config = presetConfigs[preset];
            if (!config) return;

            document.getElementById('aspectRatio').value = config.aspectRatio;
            document.getElementById('resolution').value = config.resolution;
            document.getElementById('engineMode').value = config.engineMode;
            document.getElementById('identity').value = config.identity;
            document.getElementById('gaze').value = config.gaze;
            document.getElementById('expression').value = config.expression;
            document.getElementById('hair').value = config.hair;
            document.getElementById('eyeColor').value = config.eyeColor;
            document.getElementById('outfit').value = config.outfit;
            document.getElementById('accessories').value = config.accessories;
            document.getElementById('location').value = config.location;
            document.getElementById('season').value = config.season;
            document.getElementById('timeOfDay').value = config.timeOfDay;
            document.getElementById('background').value = config.background;
        }

        function generateJSON() {
            const template = {
                protocol_manifest: {
                    version: "19.0_terminal_logic_matrix",
                    architecture_type: "Node-Based Hierarchical Schema",
                    objective: "Hyper-Realistic Photographic Reconstruction",
                    fidelity_parameters: {
                        aspect_ratio: document.getElementById('aspectRatio').value,
                        resolution: document.getElementById('resolution').value,
                        engine_mode: document.getElementById('engineMode').value,
                        filtering_synthesis: "Unfiltered / Authentic Grain"
                    }
                },
                subject_logic: {
                    biometric_anchor: {
                        identity: document.getElementById('identity').value,
                        likeness_fidelity: 1,
                        facial_configuration: {
                            gaze: document.getElementById('gaze').value,
                            expression: document.getElementById('expression').value,
                            posture: "Smartphone selfie angle / Close-up focus"
                        }
                    },
                    anatomical_specifications: {
                        dermal_layer: {
                            texture: "Visible macro-pores / Fine skin grain",
                            environmental_response: getEnvironmentalResponse(),
                            detail_mapping: "Subtle freckles across bridge of nose and cheeks",
                            shader_logic: "Sub-surface scattering (SSS) / No smoothing filters"
                        },
                        ocular_system: {
                            pigmentation: document.getElementById('eyeColor').value,
                            iris_rendering: "High-clarity fiber patterns",
                            corneal_reflection: "Sharp natural catchlights"
                        },
                        capillary_system: {
                            color_profile: parseHairColor(document.getElementById('hair').value),
                            geometry: parseHairGeometry(document.getElementById('hair').value),
                            interaction: "Naturally falling from beneath headwear"
                        }
                    }
                },
                wardrobe_logic: {
                    garment_hierarchy: {
                        outerwear: {
                            type: document.getElementById('outfit').value,
                            material_physics: "Technical fabric / Natural fibers",
                            structural_details: extractDetails(document.getElementById('outfit').value)
                        },
                           accessory_module: {
                            items: parseAccessories(document.getElementById('accessories').value)
                        }
                    },
                    cosmetic_logic: {
                        philosophy: "Natural 'No-Makeup' Aesthetic",
                        application: [
                            "Minimal foundation",
                            "Natural lip texture",
                            getSeasonalBlush()
                        ]
                    }
                },
                environment_logic: {
                    spatial_scenography: {
                        setting: document.getElementById('location').value,
                        season: document.getElementById('season').value,
                        background_elements: document.getElementById('background').value.split(',').map(item => item.trim())
                    },
                    illumination_rig: {
                        source_type: document.getElementById('timeOfDay').value,
                        chromaticity: getLightingTemp(),
                        light_transport: "Soft-diffused shadows / Low-contrast global illumination"
                    }
                },
                technical_logic: {
                    optical_configuration: {
                        lens_simulation: "24mm Wide-angle smartphone optics",
                        depth_of_field: "Realistic f/2.2 falloff / Creamy bokeh",
                        shot_type: "Authentic personal selfie"
                    },
                    pipeline_directives: {
                        color_grade: getColorGrade(),
                        texture_retention: "Zero-noise / Organic film grain / 32-bit depth",
                        artifacting: "No beauty filters / No idealized perfections"
                    }
                }
            };

            currentJSON = template;
            displayJSON();
            generateWorkflow();
        }

        function getEnvironmentalResponse() {
            const season = document.getElementById('season').value;
            const responses = {
                'Winter': 'Softly flushed cheeks / Cold-weather redness',
                'Summer': 'Sun-kissed glow / Warm radiance',
                'Autumn': 'Natural warmth / Cool-weather freshness',
                'Spring': 'Fresh healthy glow / Dewy complexion'
            };
            return responses[season] || 'Natural skin response';
        }

        function getSeasonalBlush() {
            const season = document.getElementById('season').value;
            const blush = {
                'Winter': 'Cold-exposed blush',
                'Summer': 'Sun-kissed warmth',
                'Autumn': 'Natural rosy tones',
                'Spring': 'Fresh healthy flush'
            };
            return blush[season] || 'Natural blush';
        }

        function getLightingTemp() {
            const timeOfDay = document.getElementById('timeOfDay').value;
            if (timeOfDay.includes('Golden hour') || timeOfDay.includes('sunset')) {
                return '3500K / Warm golden tone';
            } else if (timeOfDay.includes('Blue hour')) {
                return '8000K / Cool blue tone';
            } else if (timeOfDay.includes('daylight')) {
                return '6500K / Cool-tone ambient';
            }
            return '5500K / Neutral daylight';
        }

        function getColorGrade() {
            const season = document.getElementById('season').value;
            const grades = {
                'Winter': 'Naturalistic winter palette / Editorial lifestyle',
                'Summer': 'Vibrant warm palette / Coastal lifestyle',
                'Autumn': 'Rich earth tones / Cinematic warmth',
                'Spring': 'Soft pastel palette / Fresh editorial'
            };
            return grades[season] || 'Naturalistic palette / Editorial lifestyle';
        }

        function parseAccessories(accessoriesInput) {
            if (!accessoriesInput || accessoriesInput.trim() === '') {
                return ['Minimal styling', 'Natural presentation'];
            }
            return accessoriesInput.split(',').map(item => item.trim()).filter(item => item.length > 0);
        }

        function extractDetails(outfit) {
            if (!outfit || outfit.trim() === '') {
                return ['Casual comfortable styling', 'Natural material texture'];
            }
            const details = [];
            const lower = outfit.toLowerCase();
            if (lower.includes('collar')) details.push('Distinctive collar design');
            if (lower.includes('button') || lower.includes('snap')) details.push('Hardware detailing');
            if (lower.includes('stitch') || lower.includes('quilted')) details.push('High-definition fabric stitching');
            if (lower.includes('leather')) details.push('Premium leather texture');
            if (lower.includes('cotton') || lower.includes('linen')) details.push('Natural fiber weave');
            if (details.length === 0) details.push('High-quality construction', 'Natural material texture');
            return details;
        }

        function displayJSON() {
            const formatted = JSON.stringify(currentJSON, null, 2);
            const minified = JSON.stringify(currentJSON);
            
            document.getElementById('jsonOutput').textContent = formatted;
            document.getElementById('rawOutput').textContent = minified;
        }

        function generateWorkflow() {
            const workflow = `---
description: Generate photographic JSON template for image reconstruction
---

# Generate Photographic JSON Template

This workflow creates a hyper-realistic photographic reconstruction JSON template based on user specifications.

## Instructions

1. Ask the user for the following information:
   - **Scene type** (e.g., winter ski resort, summer beach, urban night)
   - **Season** (Winter, Spring, Summer, Autumn)
   - **Subject details** (hair color, eye color, outfit description)
   - **Location/Setting** (specific environment description)
   - **Time of day** (golden hour, daylight, blue hour, etc.)

2. Use the following template structure:

\`\`\`json
${JSON.stringify(currentJSON, null, 2)}
\`\`\`

3. Customize the following sections based on user input:
   - **fidelity_parameters**: Adjust aspect_ratio, resolution, and engine_mode
   - **subject_logic**: Update identity, gaze, expression, hair, and eye details
   - **wardrobe_logic**: Describe outfit and accessories
   - **environment_logic**: Set location, season, and background elements
   - **illumination_rig**: Configure lighting based on time of day

4. Save the generated JSON to a file named: \`photo_template_[scene]_[timestamp].json\`

5. Validate that all required fields are populated with realistic, detailed descriptions

## Example Usage

User: "Create a summer beach scene with sunset lighting"

Agent should:
- Set season to "Summer"
- Set timeOfDay to "Golden hour / Warm sunset"
- Configure beach-appropriate outfit and accessories
- Add tropical beach background elements
- Set warm lighting chromaticity (3500K)
`;
            
            document.getElementById('workflowOutput').textContent = workflow;
        }

        function parseHairColor(hairInput) {
            if (!hairInput || hairInput.trim() === '') return 'Natural brunette';
            const parts = hairInput.split('/');
            return parts[0].trim();
        }

        function parseHairGeometry(hairInput) {
            if (!hairInput || hairInput.trim() === '') return 'Medium length / Natural texture';
            const parts = hairInput.split('/');
            if (parts.length > 1) {
                return parts.slice(1).map(p => p.trim()).join(' / ');
            }
            return 'Medium length / Natural texture';
        }

        function showSuccessBanner(bannerId) {
            const banner = document.getElementById(bannerId);
            banner.classList.add('show');
            setTimeout(() => {
                banner.classList.remove('show');
            }, 2000);
        }

        function copyToClipboard() {
            const text = JSON.stringify(currentJSON, null, 2);
            navigator.clipboard.writeText(text).then(() => {
                showSuccessBanner('successBanner');
            });
        }

        function copyRaw() {
            const text = JSON.stringify(currentJSON);
            navigator.clipboard.writeText(text).then(() => {
                showSuccessBanner('rawSuccessBanner');
            });
        }

        function downloadJSON() {
            if (!currentJSON) return;
            
            const season = document.getElementById('season').value.toLowerCase();
            const location = document.getElementById('location').value.split('/')[0].trim().toLowerCase().replace(/\s+/g, '_');
            const timestamp = new Date().toISOString().slice(0, 10);
            const filename = `photo_template_${season}_${location}_${timestamp}.json`;
            
            const blob = new Blob([JSON.stringify(currentJSON, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            URL.revokeObjectURL(url);
        }

        function downloadWorkflow() {
            const workflowContent = document.getElementById('workflowOutput').textContent;
            const blob = new Blob([workflowContent], { type: 'text/markdown' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'generate-photo-json.md';
            a.click();
            URL.revokeObjectURL(url);
        }

        function resetForm() {
            document.getElementById('aspectRatio').value = '3:4';
            document.getElementById('resolution').value = '8K RAW / Master Quality';
            document.getElementById('engineMode').value = 'Physical Rendering (PBR)';
            document.getElementById('identity').value = '';
            document.getElementById('gaze').value = '';
            document.getElementById('expression').value = '';
            document.getElementById('hair').value = '';
            document.getElementById('eyeColor').value = '';
            document.getElementById('outfit').value = '';
            document.getElementById('accessories').value = '';
            document.getElementById('location').value = '';
            document.getElementById('season').value = 'Winter';
            document.getElementById('timeOfDay').value = 'Crisp natural daylight';
            document.getElementById('background').value = '';
            
            document.getElementById('jsonOutput').textContent = 'Click "Generate JSON" to create your template...';
            document.getElementById('rawOutput').textContent = 'Click "Generate JSON" to create your template...';
            document.getElementById('workflowOutput').textContent = 'Click "Generate JSON" to create workflow file...';
        }

        function switchTab(tabName) {
            // Hide all tabs
            document.getElementById('formatted-tab').style.display = 'none';
            document.getElementById('raw-tab').style.display = 'none';
            document.getElementById('workflow-tab').style.display = 'none';
            
            // Show selected tab
            document.getElementById(tabName + '-tab').style.display = 'block';
            
            // Update active state
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
        }
    </script>
</body>
</html>

